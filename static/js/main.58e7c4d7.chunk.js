(this["webpackJsonpreactjs-shopping-cart"]=this["webpackJsonpreactjs-shopping-cart"]||[]).push([[0],{1558:function(e,t,c){},1565:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(37),s=c.n(a),o=(c(45),c(4)),i=c(5),u=(c(46),Object(n.createContext)()),d=(c(47),c(9)),l=c(1),j=function(e){var t=e.cartObj,c=e.removeFromCart;return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)("img",{alt:"preview",src:t.smallImage,className:"w-36 h-30 ml-0"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"font-medium capitalize",children:t.productName}),Object(l.jsxs)("p",{children:["Quantity: ",t.count]})]}),Object(l.jsxs)("p",{className:"text-green-700 font-medium",children:["\u20b9",t.productPrice]}),Object(l.jsx)("div",{className:"absolute top-2 right-2",children:Object(l.jsx)("button",{onClick:function(){return c(t)},className:"focus:outline-none",children:Object(l.jsx)(d.a,{})})})]})},b="ADD_CART_ITEM",m="REMOVE_CART_ITEM",p="UPDATE_CART_ITEM_COUNT";c(49);function h(e){var t=e.totalPrice,c=e.checkout;return Object(l.jsxs)("div",{className:"checkout-container",children:[Object(l.jsxs)("div",{className:"flex place-content-between mb-5",children:[Object(l.jsx)("h1",{children:"Total"})," ",Object(l.jsxs)("p",{className:"text-green-700 font-medium items-end text-xl",children:["\u20b9",t]})]}),Object(l.jsx)("button",{className:"checkout-btn btn-green",onClick:function(){return c()},children:"Checkout"})]})}function O(e){var t=e.cartItem,c=e.removeFromCart;return Object(l.jsx)("div",{className:"cart-container",children:t.length>0?Object(l.jsx)("div",{children:t.map((function(e){return Object(l.jsx)(j,{cartObj:e,removeFromCart:c},e.id)}))}):Object(l.jsx)("p",{className:"p-10 text-red-500 decoration-clone font-semibold",children:"Your cart is empty"})})}var f=function(e){var t=e.closeCart,c=e.show,r=Object(n.useContext)(u),a=r.cartItem,s=r.dispatch,j=Object(n.useState)(0),b=Object(o.a)(j,2),p=b[0],f=b[1],x=Object(n.useState)(0),v=Object(o.a)(x,2),g=v[0],C=v[1];Object(n.useEffect)((function(){!function(){var e=0,t=0;a.map((function(c){e+=c.count*parseFloat(c.productPrice),t+=c.count})),f(e),C(t)}()}),[a]);return Object(l.jsxs)("div",{className:c?"modal display-block":"modal display-none",children:[Object(l.jsx)("div",{className:"absolute right-3 top-6",children:Object(l.jsx)("button",{onClick:function(){return t()},className:"focus:outline-none",children:Object(l.jsx)(d.a,{className:"w-5 h-5"})})}),Object(l.jsxs)("div",{className:"flex items-center justify-center py-4",children:[Object(l.jsx)(i.a,{className:"w-8 h-8"})," ",Object(l.jsx)("span",{className:"cart-count",children:g}),Object(l.jsx)("h1",{className:"text-lg font-bold ml-2",children:"Cart"})]}),Object(l.jsx)(O,{cartItem:a,removeFromCart:function(e){e.isAddedtoCart=!1,e.count=0,s({type:m,payload:e})}}),Object(l.jsx)(h,{totalPrice:p,checkout:function(){alert("Checkout: Subtotal \u20b9"+p)}})]})},x=c(13),v=c.n(x),g=c(38);c(51);function C(e){var t=e.addToCart,c=e.productItem;return Object(l.jsx)("button",{onClick:function(){return t(c)},className:"btn btn-green",children:"Add to Cart"})}var N=function(e){var t=e.product,c=e.addToCart,r=e.removeFromCart,a=e.incrementItem,s=e.decrementItem,u=Object(n.useState)(t),d=Object(o.a)(u,1)[0];return Object(l.jsxs)("div",{className:"shadow flex flex-col items-center p-3",children:[Object(l.jsx)("img",{alt:"",src:d.smallImage,className:"w-64 h-48"}),Object(l.jsx)("p",{className:"font-medium capitalize",children:d.productName}),Object(l.jsxs)("p",{children:["\u20b9",d.productPrice]}),d.isAddedtoCart?Object(l.jsxs)("div",{className:"flex grid-cols-2 gap-2 w-4/5",children:[Object(l.jsxs)("div",{className:"flex items-center",children:[Object(l.jsxs)("button",{onClick:function(){return s(d)},disabled:d.count<=1,className:"disabled:opacity-50 disabled:cursor-text focus:outline-none",children:[Object(l.jsx)(i.b,{className:"w-5 h-5"})," "]}),Object(l.jsx)("span",{className:"mx-2",children:d.count}),d.count>=1?Object(l.jsx)("button",{onClick:function(){return a(d)},className:"focus:outline-none",children:Object(l.jsx)(i.c,{className:"w-5 h-5"})}):null]}),Object(l.jsx)("button",{onClick:function(){return r(d)},className:"btn btn-red",children:Object(l.jsx)(i.d,{})})]}):Object(l.jsx)(C,{addToCart:c,productItem:d})]})},y=Object(n.createContext)(),I=c(7),w=c(39),P=c.n(w),k="FETCH_PRODUCTS",T=c(40),A=c.n(T),E=(c(1558),function(){var e=Object(n.useContext)(u),t=e.cartItem,c=e.dispatch,r=Object(n.useContext)(y),a=r.products,s=r.productDispatch,o=function(){var e=Object(g.a)(v.a.mark((function e(){var t,c,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("https://api.pexels.com/v1/search?query=toys&per_page=8&page=1",{headers:{Authorization:"563492ad6f917000010000018f3e254bdba740aab8247cce67fb3648"}});case 2:t=e.sent,c=t.data,n=c.photos,r=n.map((function(e){return{smallImage:e.src.medium,tinyImage:e.src.tiny,productName:I.random.word(),productPrice:I.commerce.price(),count:0,id:I.datatype.uuid(),age:I.datatype.number(6)}})),s({type:k,payload:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){o()}),[]),Object(n.useEffect)((function(){console.log("Cart item updated")}),[t]);var i=function(e){e.isAddedtoCart=!0,e.count=1,c({type:b,payload:e})},d=function(e){e.isAddedtoCart=!1,e.count=0,c({type:m,payload:e})},j=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count+1),c({type:p,payload:e})},h=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count-1),c({type:p,payload:e})};return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"grid lg:grid-cols-4 gap-4 md:grid-cols-3 sm:grid-cols-2 px-4",children:void 0!==a.items?a.items.map((function(e){return Object(l.jsx)(N,{product:e,addToCart:i,removeFromCart:d,incrementItem:j,decrementItem:h},e.id)})):Object(l.jsx)("div",{className:"spinner-container",children:Object(l.jsx)(A.a,{color:"#10b981"})})})})}),F=c(10),S=function(e,t){switch(t.type){case b:return[].concat(Object(F.a)(e),[t.payload]);case m:return e.filter((function(e){return e.id!==t.payload.id}));case p:var c=e.findIndex((function(e){return e.id===t.payload.id}));return[].concat(Object(F.a)(e.slice(0,c)),[Object.assign(e[c],t.payload)],Object(F.a)(e.slice(c+1)));default:return e}},_=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],r=t[1],a=Object(n.useContext)(y),s=a.products,i=a.productDispatch,u={lowestprice:function(e,t){return parseInt(e.productPrice)<parseInt(t.productPrice)?-1:parseInt(e.productPrice)>parseInt(t.productPrice)?1:0},highestprice:function(e,t){return parseInt(e.productPrice)>parseInt(t.productPrice)?-1:parseInt(e.productPrice)<parseInt(t.productPrice)?1:0}};return Object(l.jsxs)("div",{className:"mr-10 mb-5",children:[Object(l.jsx)("label",{children:"Sort by:"}),Object(l.jsxs)("select",{value:c,onChange:function(e){return t=e,s.items.sort(u[t.target.value]),r(t.target.value),void i({type:k,payload:s.items});var t},className:"border ml-2 p-2",children:[Object(l.jsx)("option",{value:"1",disabled:!0,selected:!0,children:"Select"}),Object(l.jsx)("option",{value:"lowestprice",children:"Lowest to Highest"}),Object(l.jsx)("option",{value:"highestprice",children:"Highest to Lowest"})]})]})},D=c(14),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(D.a)(Object(D.a)({},e),{},{items:t.payload});default:return e}};var M=function(){var e=Object(n.useReducer)(S,[]),t=Object(o.a)(e,2),c=t[0],r=t[1],a=Object(n.useReducer)(R,[]),s=Object(o.a)(a,2),d=s[0],j=s[1],b=Object(n.useState)({show:!1}),m=Object(o.a)(b,2),p=m[0],h=m[1],O=Object(n.useState)(0),x=Object(o.a)(O,2),v=x[0],g=x[1];return Object(n.useEffect)((function(){!function(){var e=c.reduce((function(e,t){return e+t.count}),0);g(e)}()}),[c]),Object(l.jsx)(y.Provider,{value:{products:d,productDispatch:j},children:Object(l.jsxs)(u.Provider,{value:{cartItem:c,dispatch:r},children:[Object(l.jsxs)("header",{className:"p-2 mb-4 border-b-2",children:[Object(l.jsx)("h1",{className:"text-2xl font-bold font-serif",children:"Toy shop"}),Object(l.jsxs)("button",{className:"right-4 top-3 absolute focus:outline-none",onClick:function(){return h({show:!0})},children:[Object(l.jsx)(i.a,{className:"w-5 h-5"}),Object(l.jsx)("span",{className:"cart-badge",children:v})]})]}),Object(l.jsx)("div",{className:"product-filter",children:Object(l.jsx)(_,{})}),Object(l.jsx)(E,{}),Object(l.jsx)(f,{closeCart:function(){return h({show:!1})},show:p.show})]})})},L=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1567)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root")),L()},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){}},[[1565,1,2]]]);
//# sourceMappingURL=main.58e7c4d7.chunk.js.map